import{k as e,l as r,m as n,o as t,j as u,p as i}from"./p-9b04d7dd.js";
/*!
* focus-trap 7.4.3
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function a(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function o(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?a(Object(n),!0).forEach((function(r){f(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function f(e,r,n){r=s(r);if(r in e){Object.defineProperty(e,r,{value:n,enumerable:true,configurable:true,writable:true})}else{e[r]=n}return e}function c(e,r){if(typeof e!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==undefined){var t=n.call(e,r||"default");if(typeof t!=="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function s(e){var r=c(e,"string");return typeof r==="symbol"?r:String(r)}var v={activateTrap:function e(r,n){if(r.length>0){var t=r[r.length-1];if(t!==n){t.pause()}}var u=r.indexOf(n);if(u===-1){r.push(n)}else{r.splice(u,1);r.push(n)}},deactivateTrap:function e(r,n){var t=r.indexOf(n);if(t!==-1){r.splice(t,1)}if(r.length>0){r[r.length-1].unpause()}}};var l=function e(r){return r.tagName&&r.tagName.toLowerCase()==="input"&&typeof r.select==="function"};var d=function e(r){return r.key==="Escape"||r.key==="Esc"||r.keyCode===27};var b=function e(r){return r.key==="Tab"||r.keyCode===9};var p=function e(r){return b(r)&&!r.shiftKey};var w=function e(r){return b(r)&&r.shiftKey};var h=function e(r){return setTimeout(r,0)};var y=function e(r,n){var t=-1;r.every((function(e,r){if(n(e)){t=r;return false}return true}));return t};var m=function e(r){for(var n=arguments.length,t=new Array(n>1?n-1:0),u=1;u<n;u++){t[u-1]=arguments[u]}return typeof r==="function"?r.apply(void 0,t):r};var F=function e(r){return r.target.shadowRoot&&typeof r.composedPath==="function"?r.composedPath()[0]:r.target};var O=[];var j=function u(i,a){var f=(a===null||a===void 0?void 0:a.document)||document;var c=(a===null||a===void 0?void 0:a.trapStack)||O;var s=o({returnFocusOnDeactivate:true,escapeDeactivates:true,delayInitialFocus:true,isKeyForward:p,isKeyBackward:w},a);var j={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:false,paused:false,delayInitialFocusTimer:undefined};var k;var T=function e(r,n,t){return r&&r[n]!==undefined?r[n]:s[t||n]};var D=function e(r,n){var t=typeof(n===null||n===void 0?void 0:n.composedPath)==="function"?n.composedPath():undefined;return j.containerGroups.findIndex((function(e){var n=e.container,u=e.tabbableNodes;return n.contains(r)||(t===null||t===void 0?void 0:t.includes(n))||u.find((function(e){return e===r}))}))};var g=function e(r){var n=s[r];if(typeof n==="function"){for(var t=arguments.length,u=new Array(t>1?t-1:0),i=1;i<t;i++){u[i-1]=arguments[i]}n=n.apply(void 0,u)}if(n===true){n=undefined}if(!n){if(n===undefined||n===false){return n}throw new Error("`".concat(r,"` was specified but was not a node, or did not return a node"))}var a=n;if(typeof n==="string"){a=f.querySelector(n);if(!a){throw new Error("`".concat(r,"` as selector refers to no known node"))}}return a};var E=function e(){var r=g("initialFocus");if(r===false){return false}if(r===undefined||!t(r,s.tabbableOptions)){if(D(f.activeElement)>=0){r=f.activeElement}else{var n=j.tabbableGroups[0];var u=n&&n.firstTabbableNode;r=u||g("fallbackFocus")}}if(!r){throw new Error("Your focus-trap needs to have at least one focusable element")}return r};var P=function t(){j.containerGroups=j.containers.map((function(t){var u=e(t,s.tabbableOptions);var i=r(t,s.tabbableOptions);return{container:t,tabbableNodes:u,focusableNodes:i,firstTabbableNode:u.length>0?u[0]:null,lastTabbableNode:u.length>0?u[u.length-1]:null,nextTabbableNode:function e(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var u=i.findIndex((function(e){return e===r}));if(u<0){return undefined}if(t){return i.slice(u+1).find((function(e){return n(e,s.tabbableOptions)}))}return i.slice(0,u).reverse().find((function(e){return n(e,s.tabbableOptions)}))}}}));j.tabbableGroups=j.containerGroups.filter((function(e){return e.tabbableNodes.length>0}));if(j.tabbableGroups.length<=0&&!g("fallbackFocus")){throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")}};var N=function e(r){if(r===false){return}if(r===f.activeElement){return}if(!r||!r.focus){e(E());return}r.focus({preventScroll:!!s.preventScroll});j.mostRecentlyFocusedNode=r;if(l(r)){r.select()}};var A=function e(r){var n=g("setReturnFocus",r);return n?n:n===false?false:r};var R=function e(r){var n=F(r);if(D(n,r)>=0){return}if(m(s.clickOutsideDeactivates,r)){k.deactivate({returnFocus:s.returnFocusOnDeactivate});return}if(m(s.allowOutsideClick,r)){return}r.preventDefault()};var S=function e(r){var n=F(r);var t=D(n,r)>=0;if(t||n instanceof Document){if(t){j.mostRecentlyFocusedNode=n}}else{r.stopImmediatePropagation();N(j.mostRecentlyFocusedNode||E())}};var C=function e(r){var u=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var i=F(r);P();var a=null;if(j.tabbableGroups.length>0){var o=D(i,r);var f=o>=0?j.containerGroups[o]:undefined;if(o<0){if(u){a=j.tabbableGroups[j.tabbableGroups.length-1].lastTabbableNode}else{a=j.tabbableGroups[0].firstTabbableNode}}else if(u){var c=y(j.tabbableGroups,(function(e){var r=e.firstTabbableNode;return i===r}));if(c<0&&(f.container===i||t(i,s.tabbableOptions)&&!n(i,s.tabbableOptions)&&!f.nextTabbableNode(i,false))){c=o}if(c>=0){var v=c===0?j.tabbableGroups.length-1:c-1;var l=j.tabbableGroups[v];a=l.lastTabbableNode}else if(!b(r)){a=f.nextTabbableNode(i,false)}}else{var d=y(j.tabbableGroups,(function(e){var r=e.lastTabbableNode;return i===r}));if(d<0&&(f.container===i||t(i,s.tabbableOptions)&&!n(i,s.tabbableOptions)&&!f.nextTabbableNode(i))){d=o}if(d>=0){var p=d===j.tabbableGroups.length-1?0:d+1;var w=j.tabbableGroups[p];a=w.firstTabbableNode}else if(!b(r)){a=f.nextTabbableNode(i)}}}else{a=g("fallbackFocus")}if(a){if(b(r)){r.preventDefault()}N(a)}};var B=function e(r){if(d(r)&&m(s.escapeDeactivates,r)!==false){r.preventDefault();k.deactivate();return}if(s.isKeyForward(r)||s.isKeyBackward(r)){C(r,s.isKeyBackward(r))}};var x=function e(r){var n=F(r);if(D(n,r)>=0){return}if(m(s.clickOutsideDeactivates,r)){return}if(m(s.allowOutsideClick,r)){return}r.preventDefault();r.stopImmediatePropagation()};var G=function e(){if(!j.active){return}v.activateTrap(c,k);j.delayInitialFocusTimer=s.delayInitialFocus?h((function(){N(E())})):N(E());f.addEventListener("focusin",S,true);f.addEventListener("mousedown",R,{capture:true,passive:false});f.addEventListener("touchstart",R,{capture:true,passive:false});f.addEventListener("click",x,{capture:true,passive:false});f.addEventListener("keydown",B,{capture:true,passive:false});return k};var I=function e(){if(!j.active){return}f.removeEventListener("focusin",S,true);f.removeEventListener("mousedown",R,true);f.removeEventListener("touchstart",R,true);f.removeEventListener("click",x,true);f.removeEventListener("keydown",B,true);return k};var K=function e(r){var n=r.some((function(e){var r=Array.from(e.removedNodes);return r.some((function(e){return e===j.mostRecentlyFocusedNode}))}));if(n){N(E())}};var M=typeof window!=="undefined"&&"MutationObserver"in window?new MutationObserver(K):undefined;var U=function e(){if(!M){return}M.disconnect();if(j.active&&!j.paused){j.containers.map((function(e){M.observe(e,{subtree:true,childList:true})}))}};k={get active(){return j.active},get paused(){return j.paused},activate:function e(r){if(j.active){return this}var n=T(r,"onActivate");var t=T(r,"onPostActivate");var u=T(r,"checkCanFocusTrap");if(!u){P()}j.active=true;j.paused=false;j.nodeFocusedBeforeActivation=f.activeElement;n===null||n===void 0?void 0:n();var i=function e(){if(u){P()}G();U();t===null||t===void 0?void 0:t()};if(u){u(j.containers.concat()).then(i,i);return this}i();return this},deactivate:function e(r){if(!j.active){return this}var n=o({onDeactivate:s.onDeactivate,onPostDeactivate:s.onPostDeactivate,checkCanReturnFocus:s.checkCanReturnFocus},r);clearTimeout(j.delayInitialFocusTimer);j.delayInitialFocusTimer=undefined;I();j.active=false;j.paused=false;U();v.deactivateTrap(c,k);var t=T(n,"onDeactivate");var u=T(n,"onPostDeactivate");var i=T(n,"checkCanReturnFocus");var a=T(n,"returnFocus","returnFocusOnDeactivate");t===null||t===void 0?void 0:t();var f=function e(){h((function(){if(a){N(A(j.nodeFocusedBeforeActivation))}u===null||u===void 0?void 0:u()}))};if(a&&i){i(A(j.nodeFocusedBeforeActivation)).then(f,f);return this}f();return this},pause:function e(r){if(j.paused||!j.active){return this}var n=T(r,"onPause");var t=T(r,"onPostPause");j.paused=true;n===null||n===void 0?void 0:n();I();U();t===null||t===void 0?void 0:t();return this},unpause:function e(r){if(!j.paused||!j.active){return this}var n=T(r,"onUnpause");var t=T(r,"onPostUnpause");j.paused=false;n===null||n===void 0?void 0:n();P();G();U();t===null||t===void 0?void 0:t();return this},updateContainerElements:function e(r){var n=[].concat(r).filter(Boolean);j.containers=n.map((function(e){return typeof e==="string"?f.querySelector(e):e}));if(j.active){P()}U();return this}};k.updateContainerElements(i);return k};
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.4.3
 */const k=[];function T(e,r){const{el:n}=e;const t=r?.focusTrapEl||n;if(!t){return}const a={clickOutsideDeactivates:true,escapeDeactivates:false,fallbackFocus:t,setReturnFocus:e=>{u(e);return false},...r?.focusTrapOptions,document:n.ownerDocument,tabbableOptions:i,trapStack:k};e.focusTrap=j(t,a)}function D(e,r){if(!e.focusTrapDisabled){e.focusTrap?.activate(r)}}function g(e,r){e.focusTrap?.deactivate(r)}function E(e){e.focusTrap?.updateContainerElements(e.el)}export{D as a,T as c,g as d,E as u};
//# sourceMappingURL=p-0153535c.js.map